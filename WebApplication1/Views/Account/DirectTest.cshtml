@{
    ViewBag.Title = "Direct Test - Connect2us";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-body">
                    <h2>Direct Form Test</h2>
                    <p>This form bypasses all ASP.NET validation to test if the server accepts POST requests.</p>
                    
                    <form id="directTestForm" method="post" action="/Account/Register">
                        @Html.AntiForgeryToken()
                        
                        <div class="mb-3">
                            <label class="form-label">First Name</label>
                            <input type="text" name="FirstName" value="TestFirst" class="form-control" />
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Last Name</label>
                            <input type="text" name="LastName" value="TestLast" class="form-control" />
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Email</label>
                            <input type="email" name="Email" value="test@example.com" class="form-control" />
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Username</label>
                            <input type="text" name="Username" value="testuser" class="form-control" />
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Password</label>
                            <input type="password" name="Password" value="Test123!" class="form-control" />
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Confirm Password</label>
                            <input type="password" name="ConfirmPassword" value="Test123!" class="form-control" />
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Role</label>
                            <select name="Role" class="form-select">
                                <option value="Customer" selected>Customer</option>
                                <option value="Seller">Seller</option>
                                <option value="Employee">Employee</option>
                            </select>
                        </div>
                        
                        <div class="mb-3 form-check">
                            <input type="checkbox" name="AcceptTerms" value="true" class="form-check-input" checked />
                            <label class="form-check-label">Accept Terms</label>
                        </div>
                        
                        <div class="mb-3">
                            <button type="submit" class="btn btn-primary">Submit Direct Test</button>
                            <button type="button" onclick="testDirectAjax()" class="btn btn-secondary">Test AJAX</button>
                        </div>
                    </form>
                    
                    <div id="result" class="mt-3"></div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        function testDirectAjax() {
            var form = $('#directTestForm');
            var formData = form.serialize();
            
            console.log('Sending AJAX request with data:', formData);
            
            $.ajax({
                url: '/Account/Register',
                type: 'POST',
                data: formData,
                success: function(response) {
                    $('#result').html('<div class="alert alert-success">AJAX Success: ' + JSON.stringify(response) + '</div>');
                    console.log('AJAX Success:', response);
                },
                error: function(xhr, status, error) {
                    $('#result').html('<div class="alert alert-danger">AJAX Error: ' + status + ' - ' + error + '<br>Status: ' + xhr.status + '<br>Response: ' + xhr.responseText + '</div>');
                    console.log('AJAX Error:', xhr, status, error);
                }
            });
        }
        
        // Log form submission
        $('#directTestForm').on('submit', function(e) {
            console.log('Direct form submission triggered');
            console.log('Form action:', $(this).attr('action'));
            console.log('Form method:', $(this).attr('method'));
        });
    </script>
}
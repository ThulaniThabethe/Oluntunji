@{
    string toastId = ViewBag.ToastId ?? "toast";
    string toastType = ViewBag.ToastType ?? "info"; // success, error, warning, info
    string toastTitle = ViewBag.ToastTitle ?? "Notification";
    string toastMessage = ViewBag.ToastMessage ?? "";
    bool autoHide = ViewBag.AutoHide != false;
    int delay = ViewBag.Delay ?? 5000; // 5 seconds default
    bool showCloseButton = ViewBag.ShowCloseButton != false;
}

<div class="toast-container position-fixed top-0 end-0 p-3">
    <div id="@toastId" class="toast" role="alert" aria-live="assertive" aria-atomic="true" 
         data-bs-autohide="@autoHide.ToString().ToLower()" data-bs-delay="@delay">
        <div class="toast-header bg-@toastType text-white">
            <i class="bi @GetIconClass(toastType) me-2"></i>
            <strong class="me-auto">@toastTitle</strong>
            @if (showCloseButton)
            {
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
            }
        </div>
        <div class="toast-body">
            @toastMessage
        </div>
    </div>
</div>

@functions {
    private string GetIconClass(string type)
    {
        return type switch
        {
            "success" => "bi-check-circle-fill",
            "error" => "bi-exclamation-triangle-fill",
            "warning" => "bi-exclamation-triangle-fill",
            "info" => "bi-info-circle-fill",
            _ => "bi-info-circle-fill"
        };
    }
}

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var toastElement = document.getElementById('@toastId');
        if (toastElement) {
            var toast = new bootstrap.Toast(toastElement);
            toast.show();
        }
    });
</script>

<style>
    .toast-container {
        z-index: 1055;
    }
    
    .toast {
        background-color: white;
        border: 1px solid rgba(0,0,0,.1);
        box-shadow: 0 0.5rem 1rem rgba(0,0,0,.15);
    }
    
    .toast-header.bg-success {
        background-color: #198754 !important;
    }
    
    .toast-header.bg-danger {
        background-color: #dc3545 !important;
    }
    
    .toast-header.bg-warning {
        background-color: #ffc107 !important;
        color: #212529 !important;
    }
    
    .toast-header.bg-warning .btn-close-white {
        filter: invert(1);
    }
    
    .toast-header.bg-info {
        background-color: #0dcaf0 !important;
        color: #212529 !important;
    }
    
    .toast-header.bg-info .btn-close-white {
        filter: invert(1);
    }
</style>
<!DOCTYPE html>
<html>
<head>
    <title>Test POST Request</title>
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
</head>
<body>
    <h1>Test POST Request to Account/TestDebug</h1>
    <p>This is a direct test of the POST endpoint without any ASP.NET validation.</p>
    
    <form id="testForm">
        <input type="hidden" name="FirstName" value="TestFirst" />
        <input type="hidden" name="LastName" value="TestLast" />
        <input type="hidden" name="Email" value="test@example.com" />
        <input type="hidden" name="Username" value="testuser" />
        <input type="hidden" name="Password" value="Test123!" />
        <input type="hidden" name="ConfirmPassword" value="Test123!" />
        <input type="hidden" name="Role" value="Customer" />
        <input type="hidden" name="AcceptTerms" value="true" />
    </form>
    
    <h2>Test POST to /Account/Register</h2>
    <button onclick="testPost()">Test Register POST (JSON)</button>
    <button onclick="testAjax()">Test Register AJAX</button>
    <button onclick="testFormSubmit()">Test Register Form Submit</button>

    <h2>Test POST to /Account/TestDebug</h2>
    <button onclick="testSimplePost()">Test TestDebug POST</button>

    <h2>Test POST to /Account/TestSimple</h2>
    <button onclick="testSimplePost2()">Test TestSimple POST (testData)</button>
    
    <div id="result"></div>
    
    <script>
        function testSimplePost() {
            fetch('/Account/TestDebug', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: 'testData=simple_test_data'
            })
            .then(response => response.text())
            .then(data => {
                document.getElementById('result').innerHTML = '<h3>Simple POST Result:</h3><pre>' + data + '</pre>';
            })
            .catch(error => {
                document.getElementById('result').innerHTML = '<h3>Simple POST Error:</h3><pre>' + error + '</pre>';
            });
        }

        function testSimplePost2() {
            const formData = new FormData();
            formData.append('testData', 'test_simple_action');
            
            fetch('/Account/TestSimple', {
                method: 'POST',
                body: formData
            })
            .then(response => response.text())
            .then(data => {
                document.getElementById('result').innerHTML = '<h3>TestSimple POST Response:</h3><pre>' + data + '</pre>';
            })
            .catch(error => {
                document.getElementById('result').innerHTML = '<h3>TestSimple POST Error:</h3><pre>' + error + '</pre>';
            });
        }

        function testRegisterPost() {
            const formData = new FormData();
            formData.append('__RequestVerificationToken', document.querySelector('input[name="__RequestVerificationToken"]').value);
            formData.append('FirstName', 'Test');
            formData.append('LastName', 'User');
            formData.append('Email', 'test@example.com');
            formData.append('Username', 'testuser');
            formData.append('Password', 'Test123!');
            formData.append('ConfirmPassword', 'Test123!');
            formData.append('Role', 'Customer');
            formData.append('AcceptTerms', 'true');
            
            fetch('/Account/Register', {
                method: 'POST',
                body: formData
            })
            .then(response => {
                if (response.redirected) {
                    return 'Redirected to: ' + response.url;
                } else {
                    return response.text();
                }
            })
            .then(data => {
                document.getElementById('result').innerHTML = '<h3>Register POST Response:</h3><pre>' + data + '</pre>';
            })
            .catch(error => {
                document.getElementById('result').innerHTML = '<h3>Register POST Error:</h3><pre>' + error + '</pre>';
            });
        }
        
        function testPost() {
            var data = {
                FirstName: 'TestFirst',
                LastName: 'TestLast',
                Email: 'test@example.com',
                Username: 'testuser',
                Password: 'Test123!',
                ConfirmPassword: 'Test123!',
                Role: 'Customer',
                AcceptTerms: true
            };
            
            console.log('Sending POST request to Register with data:', data);
            
            fetch('/Account/Register', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(response => {
                console.log('Response status:', response.status);
                console.log('Response headers:', response.headers);
                return response.text();
            })
            .then(data => {
                console.log('Response body:', data);
                document.getElementById('result').innerHTML = '<h3>Response:</h3><pre>' + data + '</pre>';
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('result').innerHTML = '<h3>Error:</h3><pre>' + error + '</pre>';
            });
        }
        
        function testAjax() {
            var data = {
                FirstName: 'TestFirst',
                LastName: 'TestLast',
                Email: 'test@example.com',
                Username: 'testuser',
                Password: 'Test123!',
                ConfirmPassword: 'Test123!',
                Role: 'Customer',
                AcceptTerms: true
            };
            
            console.log('Sending AJAX request with data:', data);
            
            $.ajax({
                url: '/Account/Register',
                type: 'POST',
                contentType: 'application/json',
                data: JSON.stringify(data),
                success: function(response) {
                    console.log('AJAX Success:', response);
                    document.getElementById('result').innerHTML = '<h3>AJAX Success:</h3><pre>' + JSON.stringify(response, null, 2) + '</pre>';
                },
                error: function(xhr, status, error) {
                    console.log('AJAX Error:', xhr, status, error);
                    document.getElementById('result').innerHTML = '<h3>AJAX Error:</h3><pre>Status: ' + xhr.status + '\nStatus Text: ' + xhr.statusText + '\nResponse: ' + xhr.responseText + '</pre>';
                }
            });
        }
        
        function testFormSubmit() {
            var form = document.getElementById('testForm');
            var formData = new FormData(form);
            
            console.log('Sending form data submission');
            
            fetch('/Account/Register', {
                method: 'POST',
                body: formData
            })
            .then(response => {
                console.log('Form Response status:', response.status);
                return response.text();
            })
            .then(data => {
                console.log('Form Response body:', data);
                document.getElementById('result').innerHTML = '<h3>Form Response:</h3><pre>' + data + '</pre>';
            })
            .catch(error => {
                console.error('Form Error:', error);
                document.getElementById('result').innerHTML = '<h3>Form Error:</h3><pre>' + error + '</pre>';
            });
        }
    </script>
</body>
</html>